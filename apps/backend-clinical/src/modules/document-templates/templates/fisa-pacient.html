<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fișa Pacientului</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'DejaVu Sans', Arial, sans-serif;
      font-size: 11pt;
      line-height: 1.4;
      color: #000;
      padding: 20mm;
    }

    .header {
      text-align: center;
      border-bottom: 2px solid #333;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }

    .clinic-logo {
      max-width: 150px;
      max-height: 60px;
      margin-bottom: 10px;
    }

    .clinic-info {
      font-size: 10pt;
      color: #555;
    }

    h1 {
      font-size: 16pt;
      font-weight: bold;
      margin-bottom: 5px;
      color: #000;
    }

    h2 {
      font-size: 13pt;
      font-weight: bold;
      margin-top: 15px;
      margin-bottom: 10px;
      padding-bottom: 3px;
      border-bottom: 1px solid #ccc;
      color: #333;
    }

    h3 {
      font-size: 11pt;
      font-weight: bold;
      margin-top: 10px;
      margin-bottom: 5px;
      color: #444;
    }

    .section {
      margin-bottom: 15px;
    }

    .form-row {
      display: flex;
      margin-bottom: 8px;
      page-break-inside: avoid;
    }

    .form-row.full-width {
      display: block;
    }

    .form-field {
      flex: 1;
      margin-right: 15px;
    }

    .form-field:last-child {
      margin-right: 0;
    }

    .form-field label {
      display: block;
      font-size: 9pt;
      font-weight: bold;
      color: #666;
      margin-bottom: 2px;
    }

    .form-field .value {
      display: block;
      padding: 4px 8px;
      border-bottom: 1px solid #999;
      min-height: 20px;
      font-size: 10pt;
    }

    .checkbox-group {
      margin-bottom: 5px;
    }

    .checkbox-item {
      display: inline-block;
      margin-right: 20px;
      margin-bottom: 5px;
    }

    .checkbox-item input[type="checkbox"] {
      margin-right: 5px;
    }

    .signature-section {
      margin-top: 30px;
      page-break-inside: avoid;
    }

    .signature-row {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
    }

    .signature-box {
      width: 45%;
      text-align: center;
    }

    .signature-line {
      border-top: 1px solid #000;
      margin-top: 30px;
      padding-top: 5px;
      font-size: 9pt;
      color: #666;
    }

    .important-notice {
      background-color: #fff3cd;
      border: 1px solid #ffc107;
      padding: 10px;
      margin: 15px 0;
      font-size: 9pt;
      page-break-inside: avoid;
    }

    .gdpr-notice {
      background-color: #e3f2fd;
      border: 1px solid #2196f3;
      padding: 10px;
      margin: 15px 0;
      font-size: 9pt;
      page-break-inside: avoid;
    }

    .footer {
      margin-top: 20px;
      padding-top: 10px;
      border-top: 1px solid #ccc;
      font-size: 8pt;
      color: #888;
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
    }

    table td {
      padding: 5px;
      border: 1px solid #ddd;
      font-size: 10pt;
    }

    table td.label {
      width: 40%;
      font-weight: bold;
      background-color: #f5f5f5;
    }

    @media print {
      body {
        padding: 10mm;
      }

      .page-break {
        page-break-after: always;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    {{#clinicLogo}}
    <img src="{{clinicLogo}}" alt="Logo Clinică" class="clinic-logo">
    {{/clinicLogo}}
    <h1>FIȘA PACIENTULUI</h1>
    <div class="clinic-info">
      <strong>{{clinicName}}</strong><br>
      CUI: {{clinicCUI}} | Adresa: {{clinicAddress}}<br>
      Tel: {{clinicPhone}} | Email: {{clinicEmail}}
    </div>
  </div>

  <!-- Patient Personal Data -->
  <h2>1. DATE DE IDENTIFICARE</h2>
  <div class="section">
    <div class="form-row">
      <div class="form-field">
        <label>Nume și Prenume*</label>
        <div class="value">{{patientName}}</div>
      </div>
      <div class="form-field" style="flex: 0.5;">
        <label>Nr. Fișă</label>
        <div class="value">{{patientNumber}}</div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field">
        <label>CNP (Cod Numeric Personal)*</label>
        <div class="value">{{cnp}}</div>
      </div>
      <div class="form-field">
        <label>Data Nașterii*</label>
        <div class="value">{{dateOfBirth}}</div>
      </div>
      <div class="form-field">
        <label>Sex</label>
        <div class="value">{{gender}}</div>
      </div>
    </div>

    <div class="form-row full-width">
      <div class="form-field">
        <label>Adresa Domiciliu*</label>
        <div class="value">{{address}}</div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field">
        <label>Localitate</label>
        <div class="value">{{city}}</div>
      </div>
      <div class="form-field">
        <label>Județ</label>
        <div class="value">{{county}}</div>
      </div>
      <div class="form-field">
        <label>Cod Poștal</label>
        <div class="value">{{postalCode}}</div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field">
        <label>Telefon*</label>
        <div class="value">{{phone}}</div>
      </div>
      <div class="form-field">
        <label>Email</label>
        <div class="value">{{email}}</div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field">
        <label>Ocupație</label>
        <div class="value">{{occupation}}</div>
      </div>
      <div class="form-field">
        <label>Loc de Muncă</label>
        <div class="value">{{workplace}}</div>
      </div>
    </div>
  </div>

  <!-- Emergency Contact -->
  <h2>2. PERSOANĂ DE CONTACT ÎN CAZ DE URGENȚĂ</h2>
  <div class="section">
    <div class="form-row">
      <div class="form-field">
        <label>Nume și Prenume</label>
        <div class="value">{{emergencyContactName}}</div>
      </div>
      <div class="form-field">
        <label>Relație</label>
        <div class="value">{{emergencyContactRelation}}</div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field">
        <label>Telefon</label>
        <div class="value">{{emergencyContactPhone}}</div>
      </div>
      <div class="form-field">
        <label>Email (opțional)</label>
        <div class="value">{{emergencyContactEmail}}</div>
      </div>
    </div>
  </div>

  <!-- Medical History -->
  <h2>3. ANAMNEZĂ MEDICALĂ GENERALĂ</h2>
  <div class="section">
    <div class="important-notice">
      <strong>IMPORTANT:</strong> Vă rugăm să completați cu atenție toate informațiile medicale.
      Acestea sunt esențiale pentru siguranța tratamentului dumneavoastră stomatologic.
    </div>

    <h3>Alergii Cunoscute</h3>
    <div class="form-row full-width">
      <div class="form-field">
        <label>Specificați (medicamente, latex, anestezice, alimente, altele)</label>
        <div class="value" style="min-height: 40px;">{{allergies}}</div>
      </div>
    </div>

    <h3>Boli Cronice/Afecțiuni Medicale Actuale</h3>
    <div class="form-row full-width">
      <div class="form-field">
        <label>Vă rugăm să menționați: boli cardiovasculare, diabet, hepatită, hipertensiune, etc.</label>
        <div class="value" style="min-height: 60px;">{{chronicDiseases}}</div>
      </div>
    </div>

    <h3>Medicamente în Curs de Administrare</h3>
    <div class="form-row full-width">
      <div class="form-field">
        <label>Specificați denumirea, dozajul și frecvența</label>
        <div class="value" style="min-height: 60px;">{{currentMedications}}</div>
      </div>
    </div>

    <h3>Intervenții Chirurgicale Anterioare</h3>
    <div class="form-row full-width">
      <div class="form-field">
        <label>Specificați tipul intervenției și anul</label>
        <div class="value" style="min-height: 40px;">{{previousSurgeries}}</div>
      </div>
    </div>
  </div>

  <!-- Dental History -->
  <h2>4. ANAMNEZĂ STOMATOLOGICĂ</h2>
  <div class="section">
    <div class="form-row">
      <div class="form-field">
        <label>Ultima vizită la medicul stomatolog</label>
        <div class="value">{{lastDentalVisit}}</div>
      </div>
      <div class="form-field">
        <label>Motiv (control, durere, altele)</label>
        <div class="value">{{lastVisitReason}}</div>
      </div>
    </div>

    <div class="form-row full-width">
      <div class="form-field">
        <label>Tratamente stomatologice anterioare (obturații, proteze, extracții, aparat dentar, etc.)</label>
        <div class="value" style="min-height: 60px;">{{previousTreatments}}</div>
      </div>
    </div>

    <div class="form-row full-width">
      <div class="form-field">
        <label>Probleme dentare actuale (durere, sensibilitate, sângerare gingivală, mobilitate, etc.)</label>
        <div class="value" style="min-height: 60px;">{{currentDentalProblems}}</div>
      </div>
    </div>

    <div class="form-row full-width">
      <div class="form-field">
        <label>Obiceiuri de igienă orală (periaj, ață dentară, apă de gură)</label>
        <div class="value">{{oralHygieneHabits}}</div>
      </div>
    </div>
  </div>

  <!-- Insurance Information -->
  <h2>5. DATE DESPRE ASIGURARE</h2>
  <div class="section">
    <div class="form-row">
      <div class="form-field">
        <label>Nume Asigurător</label>
        <div class="value">{{insuranceProvider}}</div>
      </div>
      <div class="form-field">
        <label>Nr. Poliță/Contract</label>
        <div class="value">{{insurancePolicyNumber}}</div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field">
        <label>Valabil de la</label>
        <div class="value">{{insuranceValidFrom}}</div>
      </div>
      <div class="form-field">
        <label>Valabil până la</label>
        <div class="value">{{insuranceValidUntil}}</div>
      </div>
    </div>
  </div>

  <!-- Page Break -->
  <div class="page-break"></div>

  <!-- GDPR Consent -->
  <h2>6. CONSIMȚĂMÂNT PRELUCRARE DATE PERSONALE (GDPR)</h2>
  <div class="section">
    <div class="gdpr-notice">
      <p><strong>Conform Regulamentului (UE) 2016/679 privind protecția datelor (GDPR)</strong>,
      vă informăm că datele dumneavoastră personale vor fi prelucrate de {{clinicName}}
      în scopul acordării serviciilor medicale stomatologice și îndeplinirii obligațiilor legale.</p>

      <p style="margin-top: 10px;"><strong>Drepturile dumneavoastră:</strong></p>
      <ul style="margin-left: 20px; margin-top: 5px;">
        <li>Dreptul de acces la datele personale</li>
        <li>Dreptul de rectificare a datelor incorecte</li>
        <li>Dreptul la ștergerea datelor (cu excepția celor cu obligativitate legală de stocare 10 ani)</li>
        <li>Dreptul de opoziție la prelucrarea datelor în scop de marketing</li>
        <li>Dreptul de a depune plângere la Autoritatea Națională de Supraveghere a Prelucrării Datelor Personale (ANSPDCP)</li>
      </ul>

      <p style="margin-top: 10px;"><strong>Perioada de stocare:</strong>
      Datele clinice vor fi păstrate 10 ani conform Legii 95/2006 privind reforma în domeniul sănătății.</p>
    </div>

    <div style="margin-top: 15px;">
      <table>
        <tr>
          <td class="label">Consimțământ prelucrare date pentru tratament medical</td>
          <td>☐ DA &nbsp;&nbsp;&nbsp; ☐ NU</td>
        </tr>
        <tr>
          <td class="label">Consimțământ comunicări prin SMS/Email pentru programări</td>
          <td>☐ DA &nbsp;&nbsp;&nbsp; ☐ NU</td>
        </tr>
        <tr>
          <td class="label">Consimțământ marketing (oferte, promoții)</td>
          <td>☐ DA &nbsp;&nbsp;&nbsp; ☐ NU</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Declaration and Signature -->
  <div class="signature-section">
    <h2>7. DECLARAȚIE ȘI SEMNĂTURĂ</h2>
    <div class="section">
      <p style="margin-bottom: 15px;">
        Subsemnatul(a), <strong>{{patientName}}</strong>, CNP <strong>{{cnp}}</strong>,
        declar pe propria răspundere că informațiile furnizate în această fișă sunt corecte și complete.
      </p>

      <p style="margin-bottom: 15px;">
        Înțeleg că datele medicale pot influența tratamentul stomatologic și mă angajez să informez
        cabinetul despre orice modificare în starea mea de sănătate.
      </p>

      <div class="signature-row">
        <div class="signature-box">
          <div class="signature-line">
            Data: {{completionDate}}
          </div>
        </div>
        <div class="signature-box">
          <div class="signature-line">
            Semnătura Pacientului
          </div>
        </div>
      </div>

      {{#legalGuardian}}
      <div class="signature-row" style="margin-top: 20px;">
        <div class="signature-box">
          <p style="font-size: 9pt; margin-bottom: 5px;">Pentru pacienți sub 18 ani:</p>
          <div class="form-field">
            <label>Nume Părinte/Tutore Legal</label>
            <div class="value">{{legalGuardianName}}</div>
          </div>
        </div>
        <div class="signature-box">
          <div class="signature-line">
            Semnătura Părinte/Tutore Legal
          </div>
        </div>
      </div>
      {{/legalGuardian}}
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p>Document generat electronic de {{clinicName}} | Data generării: {{generationDate}}</p>
    <p>Paginile acestui document fac parte integrantă din dosarul medical al pacientului și vor fi păstrate conform prevederilor legale în vigoare.</p>
  </div>
</body>
</html>
