# ============================================
# PERFORMANCE CONFIGURATION
# Backend Enterprise Service Performance Settings
# ============================================

# ============================================
# DATABASE PERFORMANCE
# ============================================

# Connection Pool Settings
DB_POOL_SIZE=10
DB_MAX_POOL_SIZE=50
DB_MIN_POOL_SIZE=5
DB_SERVER_SELECTION_TIMEOUT=30000
DB_SOCKET_TIMEOUT=45000
DB_CONNECT_TIMEOUT=30000
DB_MAX_IDLE_TIME=300000
DB_WAIT_QUEUE_TIMEOUT=10000

# Query Performance
DB_ENABLE_QUERY_LOGGING=false
DB_SLOW_QUERY_THRESHOLD=100
DB_ENABLE_EXPLAIN_PLANS=false
DB_AUTO_CREATE_INDEXES=true

# Read/Write Preferences
DB_READ_PREFERENCE=primaryPreferred
DB_READ_CONCERN=majority
DB_WRITE_CONCERN_W=majority
DB_WRITE_CONCERN_J=true
DB_WRITE_CONCERN_TIMEOUT=30000

# ============================================
# CACHE CONFIGURATION
# ============================================

CACHE_ENABLED=true
CACHE_DEFAULT_TTL=300

# TTL by Resource Type (seconds)
CACHE_TTL_ORGANIZATION=300
CACHE_TTL_CLINIC=300
CACHE_TTL_ASSIGNMENT=60
CACHE_TTL_LIST=30
CACHE_TTL_STATS=120
CACHE_TTL_SESSION=1800
CACHE_TTL_CONFIG=600

# Redis Settings
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=50
REDIS_MAX_RETRY_DELAY=2000
REDIS_OFFLINE_QUEUE=true
REDIS_READY_CHECK=true
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# Cache Warming
CACHE_WARM=true
CACHE_WARM_ON_STARTUP=false

# ============================================
# PAGINATION
# ============================================

PAGINATION_DEFAULT_LIMIT=20
PAGINATION_MAX_LIMIT=100
PAGINATION_DEFAULT_OFFSET=0
PAGINATION_USE_CURSOR=false
PAGINATION_ESTIMATE_COUNT=true

# ============================================
# CIRCUIT BREAKER
# ============================================

CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2
CIRCUIT_BREAKER_TIMEOUT=60000
CIRCUIT_BREAKER_MONITORING_PERIOD=120000

# ============================================
# REQUEST TIMEOUTS (milliseconds)
# ============================================

TIMEOUT_DEFAULT=30000
TIMEOUT_SEARCH=5000
TIMEOUT_REPORTS=120000
TIMEOUT_EXPORT=120000
TIMEOUT_BACKGROUND=300000

# ============================================
# RESPONSE OPTIMIZATION
# ============================================

RESPONSE_COMPRESSION=true
RESPONSE_COMPRESSION_MIN_SIZE=1024
RESPONSE_ETAG=true
RESPONSE_FIELD_SELECTION=true

# ============================================
# QUERY OPTIMIZATION
# ============================================

QUERY_LEAN=true
QUERY_PROJECTION=true
QUERY_BATCH_LOADING=true
QUERY_BATCH_DELAY=10
QUERY_MAX_BATCH_SIZE=100

# ============================================
# MONITORING & METRICS
# ============================================

MONITORING_ENABLED=true
MONITORING_SLOW_THRESHOLD=1000
MONITORING_WARNING_THRESHOLD=500
MONITORING_METRICS=true
MONITORING_RETENTION=3600000
MONITORING_MAX_METRICS=1000
MONITORING_LOG_SLOW_QUERIES=true
MONITORING_LOG_INTERVAL=60000

# ============================================
# GRACEFUL DEGRADATION
# ============================================

DEGRADATION_ENABLED=true
DEGRADATION_FALLBACK=true
DEGRADATION_CACHE_STALE=true
DEGRADATION_PARTIAL_RESULTS=true
DEGRADATION_STALE_TTL=3600

# ============================================
# RATE LIMITING
# ============================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=100
RATE_LIMIT_SKIP_SUCCESS=false
RATE_LIMIT_SKIP_FAILED=false

# ============================================
# MEMORY MANAGEMENT
# ============================================

MEMORY_GC_ENABLED=true
MEMORY_GC_INTERVAL=300000
MEMORY_MAX_OLD_SPACE=2048
MEMORY_MAX_HEAP=4096

# ============================================
# PERFORMANCE BUDGETS (for reference)
# ============================================
# These are target metrics, not configuration

# API Response Times (P95 targets in ms):
# - Organization CRUD: 150ms
# - Clinic CRUD: 150ms
# - Assignment operations: 200ms
# - List queries: 200ms
# - Search: 300ms
# - Reports: 2000ms

# Cache Hit Rates (targets):
# - Organization: >80%
# - Clinic: >80%
# - Assignments: >70%
# - Lists: >60%

# Database Query Performance (P95 targets in ms):
# - Single document fetch: 10ms
# - List queries: 50ms
# - Aggregations: 100ms
# - Complex joins: 200ms
