{"numTotalTestSuites":158,"numPassedTestSuites":156,"numFailedTestSuites":2,"numPendingTestSuites":0,"numTotalTests":361,"numPassedTests":296,"numFailedTests":65,"numPendingTests":0,"numTodoTests":0,"startTime":1764027406925,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["","POST /api/v1/auth/login-smart - Integration Test","Login Smart Response Structure Verification"],"fullName":" POST /api/v1/auth/login-smart - Integration Test Login Smart Response Structure Verification should return proper data structure with authentication tokens for admin user","status":"pending","title":"should return proper data structure with authentication tokens for admin user","failureMessages":[]},{"ancestorTitles":["","POST /api/v1/auth/login-smart - Integration Test","Login Smart Response Structure Verification"],"fullName":" POST /api/v1/auth/login-smart - Integration Test Login Smart Response Structure Verification should return valid tokens that can be used for authentication","status":"pending","title":"should return valid tokens that can be used for authentication","failureMessages":[]},{"ancestorTitles":["","POST /api/v1/auth/login-smart - Integration Test","Login Smart Response Structure Verification"],"fullName":" POST /api/v1/auth/login-smart - Integration Test Login Smart Response Structure Verification should handle invalid credentials with proper error response","status":"pending","title":"should handle invalid credentials with proper error response","failureMessages":[]},{"ancestorTitles":["","POST /api/v1/auth/login-smart - Integration Test","Login Smart Response Structure Verification"],"fullName":" POST /api/v1/auth/login-smart - Integration Test Login Smart Response Structure Verification should handle missing email with validation error","status":"pending","title":"should handle missing email with validation error","failureMessages":[]},{"ancestorTitles":["","POST /api/v1/auth/login-smart - Integration Test","Login Smart Response Structure Verification"],"fullName":" POST /api/v1/auth/login-smart - Integration Test Login Smart Response Structure Verification should handle missing password with validation error","status":"pending","title":"should handle missing password with validation error","failureMessages":[]}],"startTime":1764027406925,"endTime":1764027406925,"status":"failed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth-login-smart.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","POST /auth/logout (E2E)","Successful logout"],"fullName":" POST /auth/logout (E2E) Successful logout should successfully logout with valid access token","status":"passed","title":"should successfully logout with valid access token","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Successful logout"],"fullName":" POST /auth/logout (E2E) Successful logout should return 204 No Content on successful logout","status":"passed","title":"should return 204 No Content on successful logout","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Session revocation"],"fullName":" POST /auth/logout (E2E) Session revocation should mark session as revoked in Redis","status":"passed","title":"should mark session as revoked in Redis","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Session revocation"],"fullName":" POST /auth/logout (E2E) Session revocation should set revocation reason to user_logout","status":"passed","title":"should set revocation reason to user_logout","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Session revocation"],"fullName":" POST /auth/logout (E2E) Session revocation should store revocation timestamp","status":"passed","title":"should store revocation timestamp","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Token invalidation"],"fullName":" POST /auth/logout (E2E) Token invalidation should prevent using access token after logout","status":"passed","title":"should prevent using access token after logout","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Token invalidation"],"fullName":" POST /auth/logout (E2E) Token invalidation should prevent using refresh token after logout","status":"passed","title":"should prevent using refresh token after logout","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Logout idempotency"],"fullName":" POST /auth/logout (E2E) Logout idempotency should allow multiple logout requests (idempotent)","status":"passed","title":"should allow multiple logout requests (idempotent)","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Invalid session handling"],"fullName":" POST /auth/logout (E2E) Invalid session handling should return 401 for logout with invalid session ID","status":"passed","title":"should return 401 for logout with invalid session ID","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Invalid session handling"],"fullName":" POST /auth/logout (E2E) Invalid session handling should return 401 for logout without access token","status":"passed","title":"should return 401 for logout without access token","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Invalid session handling"],"fullName":" POST /auth/logout (E2E) Invalid session handling should return 401 for logout with expired access token","status":"passed","title":"should return 401 for logout with expired access token","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Cross-user logout prevention"],"fullName":" POST /auth/logout (E2E) Cross-user logout prevention should prevent user from logging out another users session","status":"passed","title":"should prevent user from logging out another users session","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Logout all devices"],"fullName":" POST /auth/logout (E2E) Logout all devices should logout all user sessions across devices","status":"passed","title":"should logout all user sessions across devices","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Logout all devices"],"fullName":" POST /auth/logout (E2E) Logout all devices should set revocation reason to logout_all_devices","status":"passed","title":"should set revocation reason to logout_all_devices","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/logout (E2E)","Logout all devices"],"fullName":" POST /auth/logout (E2E) Logout all devices should only revoke current users sessions, not other users","status":"passed","title":"should only revoke current users sessions, not other users","duration":0,"failureMessages":[]}],"startTime":1764027412729,"endTime":1764027412754,"status":"passed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth-logout.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Authentication Password Security (E2E)","Password never logged"],"fullName":" Authentication Password Security (E2E) Password never logged should not log password during registration","status":"passed","title":"should not log password during registration","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password never logged"],"fullName":" Authentication Password Security (E2E) Password never logged should not log password during login","status":"passed","title":"should not log password during login","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password never logged"],"fullName":" Authentication Password Security (E2E) Password never logged should not log password in error scenarios","status":"passed","title":"should not log password in error scenarios","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password never returned in API responses"],"fullName":" Authentication Password Security (E2E) Password never returned in API responses should not return password in registration response","status":"passed","title":"should not return password in registration response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password never returned in API responses"],"fullName":" Authentication Password Security (E2E) Password never returned in API responses should not return password in login response","status":"passed","title":"should not return password in login response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password never returned in API responses"],"fullName":" Authentication Password Security (E2E) Password never returned in API responses should not return password in /auth/me response","status":"passed","title":"should not return password in /auth/me response","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password never returned in API responses"],"fullName":" Authentication Password Security (E2E) Password never returned in API responses should not return password in error responses","status":"passed","title":"should not return password in error responses","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password hash stored in database (Argon2id)"],"fullName":" Authentication Password Security (E2E) Password hash stored in database (Argon2id) should store Argon2id hash in database","status":"passed","title":"should store Argon2id hash in database","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password hash stored in database (Argon2id)"],"fullName":" Authentication Password Security (E2E) Password hash stored in database (Argon2id) should use unique salt for each password","status":"passed","title":"should use unique salt for each password","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password verification (constant-time)"],"fullName":" Authentication Password Security (E2E) Password verification (constant-time) should use constant-time comparison to prevent timing attacks","status":"passed","title":"should use constant-time comparison to prevent timing attacks","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Weak password rejection"],"fullName":" Authentication Password Security (E2E) Weak password rejection should reject password shorter than 12 characters","status":"passed","title":"should reject password shorter than 12 characters","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Weak password rejection"],"fullName":" Authentication Password Security (E2E) Weak password rejection should reject password without uppercase letter","status":"passed","title":"should reject password without uppercase letter","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Weak password rejection"],"fullName":" Authentication Password Security (E2E) Weak password rejection should reject password without lowercase letter","status":"passed","title":"should reject password without lowercase letter","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Weak password rejection"],"fullName":" Authentication Password Security (E2E) Weak password rejection should reject password without digit","status":"passed","title":"should reject password without digit","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Weak password rejection"],"fullName":" Authentication Password Security (E2E) Weak password rejection should reject password without special character","status":"passed","title":"should reject password without special character","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Weak password rejection"],"fullName":" Authentication Password Security (E2E) Weak password rejection should reject password longer than 128 characters","status":"passed","title":"should reject password longer than 128 characters","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Weak password rejection"],"fullName":" Authentication Password Security (E2E) Weak password rejection should provide clear error messages for weak passwords","status":"passed","title":"should provide clear error messages for weak passwords","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password security best practices"],"fullName":" Authentication Password Security (E2E) Password security best practices should accept valid strong passwords","status":"passed","title":"should accept valid strong passwords","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password security best practices"],"fullName":" Authentication Password Security (E2E) Password security best practices should not expose password validation logic in responses","status":"passed","title":"should not expose password validation logic in responses","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password security best practices"],"fullName":" Authentication Password Security (E2E) Password security best practices should handle empty password gracefully","status":"passed","title":"should handle empty password gracefully","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password security best practices"],"fullName":" Authentication Password Security (E2E) Password security best practices should handle whitespace-only password gracefully","status":"passed","title":"should handle whitespace-only password gracefully","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password change scenarios"],"fullName":" Authentication Password Security (E2E) Password change scenarios should never expose old password when changing password","status":"passed","title":"should never expose old password when changing password","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password change scenarios"],"fullName":" Authentication Password Security (E2E) Password change scenarios should verify old password before allowing change","status":"passed","title":"should verify old password before allowing change","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password reset scenarios"],"fullName":" Authentication Password Security (E2E) Password reset scenarios should not reveal if email exists during password reset","status":"passed","title":"should not reveal if email exists during password reset","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Password Security (E2E)","Password reset scenarios"],"fullName":" Authentication Password Security (E2E) Password reset scenarios should use secure tokens for password reset","status":"passed","title":"should use secure tokens for password reset","duration":1,"failureMessages":[]}],"startTime":1764027412774,"endTime":1764027412814,"status":"passed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth-password-security.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/register - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/register - Rate Limiting should allow 10 registration requests","status":"passed","title":"should allow 10 registration requests","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/register - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/register - Rate Limiting should return 429 on 11th registration request","status":"passed","title":"should return 429 on 11th registration request","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/register - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/register - Rate Limiting should include Retry-After header in 429 response","status":"passed","title":"should include Retry-After header in 429 response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/register - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/register - Rate Limiting should reset rate limit after TTL expires","status":"passed","title":"should reset rate limit after TTL expires","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/register - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/register - Rate Limiting should count failed requests towards rate limit","status":"passed","title":"should count failed requests towards rate limit","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/login - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/login - Rate Limiting should allow 10 login requests","status":"passed","title":"should allow 10 login requests","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/login - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/login - Rate Limiting should return 429 on 11th login request","status":"passed","title":"should return 429 on 11th login request","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/login - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/login - Rate Limiting should include Retry-After header in 429 response","status":"passed","title":"should include Retry-After header in 429 response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/login - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/login - Rate Limiting should reset rate limit after TTL expires","status":"passed","title":"should reset rate limit after TTL expires","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","POST /auth/login - Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) POST /auth/login - Rate Limiting should count failed login attempts towards rate limit","status":"passed","title":"should count failed login attempts towards rate limit","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Per-IP Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) Per-IP Rate Limiting should have independent rate limits for different IPs","status":"passed","title":"should have independent rate limits for different IPs","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Per-IP Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) Per-IP Rate Limiting should use correct IP from X-Forwarded-For header","status":"passed","title":"should use correct IP from X-Forwarded-For header","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Per-IP Rate Limiting"],"fullName":" Authentication Rate Limiting (E2E) Per-IP Rate Limiting should handle multiple IPs in X-Forwarded-For header","status":"passed","title":"should handle multiple IPs in X-Forwarded-For header","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Rate Limit Headers"],"fullName":" Authentication Rate Limiting (E2E) Rate Limit Headers should include X-RateLimit-Limit header","status":"passed","title":"should include X-RateLimit-Limit header","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Rate Limit Headers"],"fullName":" Authentication Rate Limiting (E2E) Rate Limit Headers should include X-RateLimit-Remaining header","status":"passed","title":"should include X-RateLimit-Remaining header","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Rate Limit Headers"],"fullName":" Authentication Rate Limiting (E2E) Rate Limit Headers should include X-RateLimit-Reset header","status":"passed","title":"should include X-RateLimit-Reset header","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Rate Limit Headers"],"fullName":" Authentication Rate Limiting (E2E) Rate Limit Headers should decrement X-RateLimit-Remaining with each request","status":"passed","title":"should decrement X-RateLimit-Remaining with each request","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Distributed Rate Limiting (Redis)"],"fullName":" Authentication Rate Limiting (E2E) Distributed Rate Limiting (Redis) should use Redis for rate limit storage","status":"passed","title":"should use Redis for rate limit storage","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Distributed Rate Limiting (Redis)"],"fullName":" Authentication Rate Limiting (E2E) Distributed Rate Limiting (Redis) should work across multiple application instances","status":"passed","title":"should work across multiple application instances","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Distributed Rate Limiting (Redis)"],"fullName":" Authentication Rate Limiting (E2E) Distributed Rate Limiting (Redis) should handle Redis connection failures gracefully","status":"passed","title":"should handle Redis connection failures gracefully","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Rate Limiting Edge Cases"],"fullName":" Authentication Rate Limiting (E2E) Rate Limiting Edge Cases should handle concurrent requests correctly","status":"passed","title":"should handle concurrent requests correctly","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Rate Limiting Edge Cases"],"fullName":" Authentication Rate Limiting (E2E) Rate Limiting Edge Cases should not rate limit /auth/me endpoint","status":"passed","title":"should not rate limit /auth/me endpoint","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Rate Limiting (E2E)","Rate Limiting Edge Cases"],"fullName":" Authentication Rate Limiting (E2E) Rate Limiting Edge Cases should have separate rate limit buckets for register and login","status":"passed","title":"should have separate rate limit buckets for register and login","duration":0,"failureMessages":[]}],"startTime":1764027410779,"endTime":1764027410814,"status":"passed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth-rate-limiting.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","POST /auth/refresh (E2E)","Successful token refresh"],"fullName":" POST /auth/refresh (E2E) Successful token refresh should return new access token and refresh token with valid refresh token","status":"passed","title":"should return new access token and refresh token with valid refresh token","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Successful token refresh"],"fullName":" POST /auth/refresh (E2E) Successful token refresh should create new session with unique session ID","status":"passed","title":"should create new session with unique session ID","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Successful token refresh"],"fullName":" POST /auth/refresh (E2E) Successful token refresh should invalidate old session after successful refresh","status":"passed","title":"should invalidate old session after successful refresh","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Successful token refresh"],"fullName":" POST /auth/refresh (E2E) Successful token refresh should update device metadata on refresh","status":"passed","title":"should update device metadata on refresh","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Successful token refresh"],"fullName":" POST /auth/refresh (E2E) Successful token refresh should maintain user data in new access token","status":"passed","title":"should maintain user data in new access token","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Invalid refresh token failures"],"fullName":" POST /auth/refresh (E2E) Invalid refresh token failures should return 401 for expired refresh token","status":"passed","title":"should return 401 for expired refresh token","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Invalid refresh token failures"],"fullName":" POST /auth/refresh (E2E) Invalid refresh token failures should return 401 for malformed refresh token","status":"passed","title":"should return 401 for malformed refresh token","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Invalid refresh token failures"],"fullName":" POST /auth/refresh (E2E) Invalid refresh token failures should return 401 for refresh token with invalid signature","status":"passed","title":"should return 401 for refresh token with invalid signature","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Invalid refresh token failures"],"fullName":" POST /auth/refresh (E2E) Invalid refresh token failures should return 401 for revoked session","status":"passed","title":"should return 401 for revoked session","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Invalid refresh token failures"],"fullName":" POST /auth/refresh (E2E) Invalid refresh token failures should return 401 for non-existent session","status":"passed","title":"should return 401 for non-existent session","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Invalid refresh token failures"],"fullName":" POST /auth/refresh (E2E) Invalid refresh token failures should return 400 for missing refresh token","status":"passed","title":"should return 400 for missing refresh token","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Cross-tenant isolation"],"fullName":" POST /auth/refresh (E2E) Cross-tenant isolation should reject refresh token with mismatched organizationId","status":"passed","title":"should reject refresh token with mismatched organizationId","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Cross-tenant isolation"],"fullName":" POST /auth/refresh (E2E) Cross-tenant isolation should not allow refresh tokens to be used across organizations","status":"passed","title":"should not allow refresh tokens to be used across organizations","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Replay attack prevention"],"fullName":" POST /auth/refresh (E2E) Replay attack prevention should reject previously used refresh token (replay attack)","status":"passed","title":"should reject previously used refresh token (replay attack)","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Replay attack prevention"],"fullName":" POST /auth/refresh (E2E) Replay attack prevention should mark old session as revoked with reason token_rotated","status":"passed","title":"should mark old session as revoked with reason token_rotated","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Token rotation atomicity"],"fullName":" POST /auth/refresh (E2E) Token rotation atomicity should ensure atomic token rotation (all-or-nothing)","status":"passed","title":"should ensure atomic token rotation (all-or-nothing)","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Concurrent refresh requests"],"fullName":" POST /auth/refresh (E2E) Concurrent refresh requests should handle concurrent refresh requests gracefully","status":"passed","title":"should handle concurrent refresh requests gracefully","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Concurrent refresh requests"],"fullName":" POST /auth/refresh (E2E) Concurrent refresh requests should use Redis locking to prevent race conditions","status":"passed","title":"should use Redis locking to prevent race conditions","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Rate limiting"],"fullName":" POST /auth/refresh (E2E) Rate limiting should allow 20 refresh requests per minute","status":"passed","title":"should allow 20 refresh requests per minute","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Rate limiting"],"fullName":" POST /auth/refresh (E2E) Rate limiting should return 429 on 21st refresh request within a minute","status":"passed","title":"should return 429 on 21st refresh request within a minute","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Rate limiting"],"fullName":" POST /auth/refresh (E2E) Rate limiting should include Retry-After header in rate limit response","status":"passed","title":"should include Retry-After header in rate limit response","duration":1,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Validation errors"],"fullName":" POST /auth/refresh (E2E) Validation errors should return 400 for empty request body","status":"passed","title":"should return 400 for empty request body","duration":0,"failureMessages":[]},{"ancestorTitles":["","POST /auth/refresh (E2E)","Validation errors"],"fullName":" POST /auth/refresh (E2E) Validation errors should return 400 for non-string refresh token","status":"passed","title":"should return 400 for non-string refresh token","duration":0,"failureMessages":[]}],"startTime":1764027410563,"endTime":1764027410601,"status":"passed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth-refresh.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Success scenarios"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Success scenarios should return list of active sessions for current user","status":"passed","title":"should return list of active sessions for current user","duration":2,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Success scenarios"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Success scenarios should only return active sessions (not revoked)","status":"passed","title":"should only return active sessions (not revoked)","duration":1,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Success scenarios"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Success scenarios should identify current session with isCurrent flag","status":"passed","title":"should identify current session with isCurrent flag","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Success scenarios"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Success scenarios should include device information in session list","status":"passed","title":"should include device information in session list","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Success scenarios"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Success scenarios should mask IP addresses for privacy","status":"passed","title":"should mask IP addresses for privacy","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Success scenarios"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Success scenarios should include session timestamps","status":"passed","title":"should include session timestamps","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Success scenarios"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Success scenarios should return empty array if user has no active sessions","status":"passed","title":"should return empty array if user has no active sessions","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Authentication errors"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Authentication errors should return 401 without access token","status":"passed","title":"should return 401 without access token","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Authentication errors"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Authentication errors should return 401 with invalid access token","status":"passed","title":"should return 401 with invalid access token","duration":1,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Authentication errors"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Authentication errors should return 401 with expired access token","status":"passed","title":"should return 401 with expired access token","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","GET /auth/sessions - List user sessions","Tenant isolation"],"fullName":" Session Management Endpoints (E2E) GET /auth/sessions - List user sessions Tenant isolation should only return sessions for current organizations user","status":"passed","title":"should only return sessions for current organizations user","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","DELETE /auth/sessions/:sessionId - Delete specific session","Success scenarios"],"fullName":" Session Management Endpoints (E2E) DELETE /auth/sessions/:sessionId - Delete specific session Success scenarios should successfully delete specific session","status":"passed","title":"should successfully delete specific session","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","DELETE /auth/sessions/:sessionId - Delete specific session","Success scenarios"],"fullName":" Session Management Endpoints (E2E) DELETE /auth/sessions/:sessionId - Delete specific session Success scenarios should mark deleted session as revoked with reason session_deleted","status":"passed","title":"should mark deleted session as revoked with reason session_deleted","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","DELETE /auth/sessions/:sessionId - Delete specific session","Success scenarios"],"fullName":" Session Management Endpoints (E2E) DELETE /auth/sessions/:sessionId - Delete specific session Success scenarios should return 204 No Content on successful deletion","status":"passed","title":"should return 204 No Content on successful deletion","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","DELETE /auth/sessions/:sessionId - Delete specific session","Cross-user session isolation"],"fullName":" Session Management Endpoints (E2E) DELETE /auth/sessions/:sessionId - Delete specific session Cross-user session isolation should prevent deleting another users session","status":"passed","title":"should prevent deleting another users session","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","DELETE /auth/sessions/:sessionId - Delete specific session","Current session protection"],"fullName":" Session Management Endpoints (E2E) DELETE /auth/sessions/:sessionId - Delete specific session Current session protection should allow deleting current session (alternative: prevent)","status":"passed","title":"should allow deleting current session (alternative: prevent)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","DELETE /auth/sessions/:sessionId - Delete specific session","Invalid session handling"],"fullName":" Session Management Endpoints (E2E) DELETE /auth/sessions/:sessionId - Delete specific session Invalid session handling should return 404 for non-existent session ID","status":"passed","title":"should return 404 for non-existent session ID","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","DELETE /auth/sessions/:sessionId - Delete specific session","Invalid session handling"],"fullName":" Session Management Endpoints (E2E) DELETE /auth/sessions/:sessionId - Delete specific session Invalid session handling should return 400 for invalid session ID format","status":"passed","title":"should return 400 for invalid session ID format","duration":1,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","DELETE /auth/sessions/:sessionId - Delete specific session","Invalid session handling"],"fullName":" Session Management Endpoints (E2E) DELETE /auth/sessions/:sessionId - Delete specific session Invalid session handling should return 200 for already deleted session (idempotent)","status":"passed","title":"should return 200 for already deleted session (idempotent)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","Session limit enforcement"],"fullName":" Session Management Endpoints (E2E) Session limit enforcement should enforce maximum 5 concurrent sessions per user","status":"passed","title":"should enforce maximum 5 concurrent sessions per user","duration":1,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","Session limit enforcement"],"fullName":" Session Management Endpoints (E2E) Session limit enforcement should list maximum 5 active sessions","status":"passed","title":"should list maximum 5 active sessions","duration":0,"failureMessages":[]},{"ancestorTitles":["","Session Management Endpoints (E2E)","Session limit enforcement"],"fullName":" Session Management Endpoints (E2E) Session limit enforcement should set revocation reason to session_limit_exceeded for auto-revoked sessions","status":"passed","title":"should set revocation reason to session_limit_exceeded for auto-revoked sessions","duration":0,"failureMessages":[]}],"startTime":1764027409436,"endTime":1764027409449,"status":"passed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth-sessions.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Auth-Subscription Integration (E2E)","1. Login with subscription context"],"fullName":" Auth-Subscription Integration (E2E) 1. Login with subscription context should include cabinetId in JWT token on successful login","status":"failed","title":"should include cabinetId in JWT token on successful login","duration":38,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":294,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","1. Login with subscription context"],"fullName":" Auth-Subscription Integration (E2E) 1. Login with subscription context should include subscription.status in JWT token","status":"failed","title":"should include subscription.status in JWT token","duration":10,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":321,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","1. Login with subscription context"],"fullName":" Auth-Subscription Integration (E2E) 1. Login with subscription context should include subscription.modules[] array with module codes","status":"failed","title":"should include subscription.modules[] array with module codes","duration":6,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":345,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","2. Graceful degradation"],"fullName":" Auth-Subscription Integration (E2E) 2. Graceful degradation should allow login even if subscription service is down","status":"failed","title":"should allow login even if subscription service is down","duration":6,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":376,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","2. Graceful degradation"],"fullName":" Auth-Subscription Integration (E2E) 2. Graceful degradation should return valid JWT without subscription context when service unavailable","status":"failed","title":"should return valid JWT without subscription context when service unavailable","duration":6,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":398,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","2. Graceful degradation"],"fullName":" Auth-Subscription Integration (E2E) 2. Graceful degradation should not include subscription fields in JWT when service unavailable","status":"failed","title":"should not include subscription fields in JWT when service unavailable","duration":5,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":423,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","3. Cabinet selection"],"fullName":" Auth-Subscription Integration (E2E) 3. Cabinet selection should select default cabinet when user has multiple cabinets","status":"failed","title":"should select default cabinet when user has multiple cabinets","duration":5,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":456,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","3. Cabinet selection"],"fullName":" Auth-Subscription Integration (E2E) 3. Cabinet selection should select first cabinet when user has no default","status":"failed","title":"should select first cabinet when user has no default","duration":5,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":486,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","3. Cabinet selection"],"fullName":" Auth-Subscription Integration (E2E) 3. Cabinet selection should match subscription data to selected cabinet","status":"failed","title":"should match subscription data to selected cabinet","duration":8,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":508,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","4. Module authorization scenarios"],"fullName":" Auth-Subscription Integration (E2E) 4. Module authorization scenarios should include inventory module in JWT when subscription is active","status":"failed","title":"should include inventory module in JWT when subscription is active","duration":6,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":537,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","4. Module authorization scenarios"],"fullName":" Auth-Subscription Integration (E2E) 4. Module authorization scenarios should not include imaging module when not in subscription","status":"failed","title":"should not include imaging module when not in subscription","duration":4,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":566,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","4. Module authorization scenarios"],"fullName":" Auth-Subscription Integration (E2E) 4. Module authorization scenarios should return EXPIRED status for expired subscription","status":"failed","title":"should return EXPIRED status for expired subscription","duration":4,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":589,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","4. Module authorization scenarios"],"fullName":" Auth-Subscription Integration (E2E) 4. Module authorization scenarios should only include active modules in JWT","status":"failed","title":"should only include active modules in JWT","duration":5,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":623,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","5. JWT payload structure validation"],"fullName":" Auth-Subscription Integration (E2E) 5. JWT payload structure validation should have all required JWT fields","status":"failed","title":"should have all required JWT fields","duration":5,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":649,"column":10}},{"ancestorTitles":["","Auth-Subscription Integration (E2E)","5. JWT payload structure validation"],"fullName":" Auth-Subscription Integration (E2E) 5. JWT payload structure validation should have subscription object with correct structure","status":"failed","title":"should have subscription object with correct structure","duration":6,"failureMessages":["expected 200 \"OK\", got 500 \"Internal Server Error\""],"location":{"line":680,"column":10}}],"startTime":1764027410330,"endTime":1764027410466,"status":"failed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth-subscription-integration.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with Active Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with Active Subscription should return JWT with subscription modules for active subscription","status":"failed","title":"should return JWT with subscription modules for active subscription","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with Active Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with Active Subscription should cache subscription data for performance","status":"failed","title":"should cache subscription data for performance","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with Active Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with Active Subscription should include all 4 core modules in JWT","status":"failed","title":"should include all 4 core modules in JWT","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with Trial Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with Trial Subscription should return JWT with trial flag for trial subscription","status":"failed","title":"should return JWT with trial flag for trial subscription","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with Trial Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with Trial Subscription should grant access to core modules during trial","status":"failed","title":"should grant access to core modules during trial","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with Expired Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with Expired Subscription should handle expired subscription gracefully","status":"failed","title":"should handle expired subscription gracefully","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with Expired Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with Expired Subscription should deny access to module-protected routes with expired subscription","status":"failed","title":"should deny access to module-protected routes with expired subscription","duration":5,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with No Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with No Subscription should return null when no subscription exists","status":"failed","title":"should return null when no subscription exists","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with No Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with No Subscription should handle login when subscription service is down","status":"failed","title":"should handle login when subscription service is down","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Login with No Subscription"],"fullName":" Auth-Subscription Integration E2E Tests Login with No Subscription should return null when circuit breaker is open","status":"failed","title":"should return null when circuit breaker is open","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Token Refresh with Subscription Updates"],"fullName":" Auth-Subscription Integration E2E Tests Token Refresh with Subscription Updates should refresh subscription data on token refresh","status":"failed","title":"should refresh subscription data on token refresh","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Token Refresh with Subscription Updates"],"fullName":" Auth-Subscription Integration E2E Tests Token Refresh with Subscription Updates should invalidate cache on subscription webhook","status":"failed","title":"should invalidate cache on subscription webhook","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Module-Protected Routes"],"fullName":" Auth-Subscription Integration E2E Tests Module-Protected Routes should allow access when user has required module","status":"failed","title":"should allow access when user has required module","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Module-Protected Routes"],"fullName":" Auth-Subscription Integration E2E Tests Module-Protected Routes should deny access when user lacks required module","status":"failed","title":"should deny access when user lacks required module","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Module-Protected Routes"],"fullName":" Auth-Subscription Integration E2E Tests Module-Protected Routes should validate module access for all core modules","status":"failed","title":"should validate module access for all core modules","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Circuit Breaker Fallback"],"fullName":" Auth-Subscription Integration E2E Tests Circuit Breaker Fallback should use fallback behavior when subscription service fails","status":"failed","title":"should use fallback behavior when subscription service fails","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Circuit Breaker Fallback"],"fullName":" Auth-Subscription Integration E2E Tests Circuit Breaker Fallback should recover when subscription service comes back online","status":"failed","title":"should recover when subscription service comes back online","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Cache Performance"],"fullName":" Auth-Subscription Integration E2E Tests Cache Performance should serve cached data within 5ms","status":"failed","title":"should serve cached data within 5ms","duration":5,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Cache Performance"],"fullName":" Auth-Subscription Integration E2E Tests Cache Performance should expire cache after TTL","status":"failed","title":"should expire cache after TTL","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Auth-Subscription Integration E2E Tests","Multi-Tenant Isolation"],"fullName":" Auth-Subscription Integration E2E Tests Multi-Tenant Isolation should isolate subscription data by organization","status":"failed","title":"should isolate subscription data by organization","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}}],"startTime":1764027410649,"endTime":1764027410734,"status":"failed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth-subscription.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","User registration isolation"],"fullName":" Authentication Tenant Isolation (E2E) User registration isolation should allow same email in different organizations","status":"passed","title":"should allow same email in different organizations","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","User registration isolation"],"fullName":" Authentication Tenant Isolation (E2E) User registration isolation should prevent duplicate email within same organization","status":"passed","title":"should prevent duplicate email within same organization","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Login isolation"],"fullName":" Authentication Tenant Isolation (E2E) Login isolation should prevent login with email from different organization","status":"passed","title":"should prevent login with email from different organization","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Login isolation"],"fullName":" Authentication Tenant Isolation (E2E) Login isolation should allow login only to correct organization","status":"passed","title":"should allow login only to correct organization","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Login isolation"],"fullName":" Authentication Tenant Isolation (E2E) Login isolation should allow same email to login to different organizations independently","status":"passed","title":"should allow same email to login to different organizations independently","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","JWT token isolation"],"fullName":" Authentication Tenant Isolation (E2E) JWT token isolation should include organizationId in JWT payload","status":"passed","title":"should include organizationId in JWT payload","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","JWT token isolation"],"fullName":" Authentication Tenant Isolation (E2E) JWT token isolation should prevent accessing resources with token from different organization","status":"passed","title":"should prevent accessing resources with token from different organization","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Data access isolation"],"fullName":" Authentication Tenant Isolation (E2E) Data access isolation should only return user data from same organization","status":"passed","title":"should only return user data from same organization","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Data access isolation"],"fullName":" Authentication Tenant Isolation (E2E) Data access isolation should prevent user enumeration across organizations","status":"passed","title":"should prevent user enumeration across organizations","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Database-level isolation"],"fullName":" Authentication Tenant Isolation (E2E) Database-level isolation should filter all queries by organizationId","status":"passed","title":"should filter all queries by organizationId","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Database-level isolation"],"fullName":" Authentication Tenant Isolation (E2E) Database-level isolation should enforce unique constraint at organization level","status":"passed","title":"should enforce unique constraint at organization level","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Session isolation"],"fullName":" Authentication Tenant Isolation (E2E) Session isolation should maintain separate sessions per organization","status":"passed","title":"should maintain separate sessions per organization","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Error message security"],"fullName":" Authentication Tenant Isolation (E2E) Error message security should not leak organization information in errors","status":"passed","title":"should not leak organization information in errors","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Error message security"],"fullName":" Authentication Tenant Isolation (E2E) Error message security should not reveal user existence across organizations","status":"passed","title":"should not reveal user existence across organizations","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Cross-tenant attack prevention"],"fullName":" Authentication Tenant Isolation (E2E) Cross-tenant attack prevention should prevent JWT token replay across organizations","status":"passed","title":"should prevent JWT token replay across organizations","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Tenant Isolation (E2E)","Cross-tenant attack prevention"],"fullName":" Authentication Tenant Isolation (E2E) Cross-tenant attack prevention should prevent authorization bypass via organizationId manipulation","status":"passed","title":"should prevent authorization bypass via organizationId manipulation","duration":1,"failureMessages":[]}],"startTime":1764027412829,"endTime":1764027412851,"status":"passed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth-tenant-isolation.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Success scenarios"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Success scenarios should return 201 with tokens and user data","status":"passed","title":"should return 201 with tokens and user data","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Success scenarios"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Success scenarios should hash password in database","status":"passed","title":"should hash password in database","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Success scenarios"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Success scenarios should allow duplicate email in different organization","status":"passed","title":"should allow duplicate email in different organization","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Success scenarios"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Success scenarios should include valid JWT tokens","status":"passed","title":"should include valid JWT tokens","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Validation errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Validation errors should return 409 for duplicate email in same organization","status":"passed","title":"should return 409 for duplicate email in same organization","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Validation errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Validation errors should return 400 for invalid email format","status":"passed","title":"should return 400 for invalid email format","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Validation errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Validation errors should return 400 for weak password (too short)","status":"passed","title":"should return 400 for weak password (too short)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Validation errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Validation errors should return 400 for weak password (missing uppercase)","status":"passed","title":"should return 400 for weak password (missing uppercase)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Validation errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Validation errors should return 400 for missing required fields","status":"passed","title":"should return 400 for missing required fields","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/register","Rate limiting"],"fullName":" Authentication Endpoints (E2E) POST /auth/register Rate limiting should return 429 after 10 requests","status":"passed","title":"should return 429 after 10 requests","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Success scenarios"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Success scenarios should return 200 with tokens and user data","status":"passed","title":"should return 200 with tokens and user data","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Success scenarios"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Success scenarios should update last login timestamp","status":"passed","title":"should update last login timestamp","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Authentication errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Authentication errors should return 401 for user not found","status":"passed","title":"should return 401 for user not found","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Authentication errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Authentication errors should return 401 for wrong password","status":"passed","title":"should return 401 for wrong password","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Authentication errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Authentication errors should return 401 for inactive user","status":"passed","title":"should return 401 for inactive user","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Authentication errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Authentication errors should return 401 for blocked user","status":"passed","title":"should return 401 for blocked user","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Authentication errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Authentication errors should return generic error messages","status":"passed","title":"should return generic error messages","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Validation errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Validation errors should return 400 for invalid email format","status":"passed","title":"should return 400 for invalid email format","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Validation errors"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Validation errors should return 400 for missing organizationId","status":"passed","title":"should return 400 for missing organizationId","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Tenant isolation"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Tenant isolation should not allow login to different organization","status":"passed","title":"should not allow login to different organization","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","POST /auth/login","Rate limiting"],"fullName":" Authentication Endpoints (E2E) POST /auth/login Rate limiting should return 429 after 10 requests","status":"passed","title":"should return 429 after 10 requests","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","GET /auth/me","Success scenarios"],"fullName":" Authentication Endpoints (E2E) GET /auth/me Success scenarios should return user data with valid JWT","status":"passed","title":"should return user data with valid JWT","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","GET /auth/me","Success scenarios"],"fullName":" Authentication Endpoints (E2E) GET /auth/me Success scenarios should not include password hash in response","status":"passed","title":"should not include password hash in response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","GET /auth/me","Authentication errors"],"fullName":" Authentication Endpoints (E2E) GET /auth/me Authentication errors should return 401 without JWT token","status":"passed","title":"should return 401 without JWT token","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","GET /auth/me","Authentication errors"],"fullName":" Authentication Endpoints (E2E) GET /auth/me Authentication errors should return 401 with invalid JWT token","status":"passed","title":"should return 401 with invalid JWT token","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","GET /auth/me","Authentication errors"],"fullName":" Authentication Endpoints (E2E) GET /auth/me Authentication errors should return 401 with expired JWT token","status":"passed","title":"should return 401 with expired JWT token","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","Cross-cutting concerns","Correlation ID"],"fullName":" Authentication Endpoints (E2E) Cross-cutting concerns Correlation ID should include correlation ID in all responses","status":"passed","title":"should include correlation ID in all responses","duration":1,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","Cross-cutting concerns","Correlation ID"],"fullName":" Authentication Endpoints (E2E) Cross-cutting concerns Correlation ID should generate correlation ID if not provided","status":"passed","title":"should generate correlation ID if not provided","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","Cross-cutting concerns","API Documentation"],"fullName":" Authentication Endpoints (E2E) Cross-cutting concerns API Documentation should have Swagger documentation for endpoints","status":"passed","title":"should have Swagger documentation for endpoints","duration":0,"failureMessages":[]},{"ancestorTitles":["","Authentication Endpoints (E2E)","Cross-cutting concerns","DTO Validation"],"fullName":" Authentication Endpoints (E2E) Cross-cutting concerns DTO Validation should enforce all DTO constraints","status":"passed","title":"should enforce all DTO constraints","duration":0,"failureMessages":[]}],"startTime":1764027410491,"endTime":1764027410523,"status":"passed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/auth.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Application Bootstrap (E2E)","Module Initialization"],"fullName":" Application Bootstrap (E2E) Module Initialization should initialize AppModule successfully","status":"passed","title":"should initialize AppModule successfully","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Module Initialization"],"fullName":" Application Bootstrap (E2E) Module Initialization should load ConfigModule with environment configuration","status":"passed","title":"should load ConfigModule with environment configuration","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Module Initialization"],"fullName":" Application Bootstrap (E2E) Module Initialization should connect TypeORM to test database","status":"passed","title":"should connect TypeORM to test database","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Module Initialization"],"fullName":" Application Bootstrap (E2E) Module Initialization should connect Redis to test cache","status":"passed","title":"should connect Redis to test cache","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Module Initialization"],"fullName":" Application Bootstrap (E2E) Module Initialization should initialize event bus","status":"passed","title":"should initialize event bus","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Module Initialization"],"fullName":" Application Bootstrap (E2E) Module Initialization should register all guards, interceptors, and filters","status":"passed","title":"should register all guards, interceptors, and filters","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Configuration Validation"],"fullName":" Application Bootstrap (E2E) Configuration Validation should load required environment variables","status":"passed","title":"should load required environment variables","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Configuration Validation"],"fullName":" Application Bootstrap (E2E) Configuration Validation should apply default values for optional variables","status":"passed","title":"should apply default values for optional variables","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Configuration Validation"],"fullName":" Application Bootstrap (E2E) Configuration Validation should fail validation on invalid configuration","status":"passed","title":"should fail validation on invalid configuration","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Configuration Validation"],"fullName":" Application Bootstrap (E2E) Configuration Validation should parse database connection string correctly","status":"passed","title":"should parse database connection string correctly","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Configuration Validation"],"fullName":" Application Bootstrap (E2E) Configuration Validation should apply Redis connection options","status":"passed","title":"should apply Redis connection options","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Graceful Shutdown"],"fullName":" Application Bootstrap (E2E) Graceful Shutdown should trigger graceful shutdown on SIGTERM","status":"passed","title":"should trigger graceful shutdown on SIGTERM","duration":1,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Graceful Shutdown"],"fullName":" Application Bootstrap (E2E) Graceful Shutdown should trigger graceful shutdown on SIGINT","status":"passed","title":"should trigger graceful shutdown on SIGINT","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Graceful Shutdown"],"fullName":" Application Bootstrap (E2E) Graceful Shutdown should close database connections properly","status":"passed","title":"should close database connections properly","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Graceful Shutdown"],"fullName":" Application Bootstrap (E2E) Graceful Shutdown should close Redis connections properly","status":"passed","title":"should close Redis connections properly","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Graceful Shutdown"],"fullName":" Application Bootstrap (E2E) Graceful Shutdown should disconnect event bus cleanly","status":"passed","title":"should disconnect event bus cleanly","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Graceful Shutdown"],"fullName":" Application Bootstrap (E2E) Graceful Shutdown should complete in-flight requests before shutting down","status":"passed","title":"should complete in-flight requests before shutting down","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Graceful Shutdown"],"fullName":" Application Bootstrap (E2E) Graceful Shutdown should reject new requests during shutdown","status":"passed","title":"should reject new requests during shutdown","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Middleware Registration"],"fullName":" Application Bootstrap (E2E) Middleware Registration should run correlation ID middleware on all routes","status":"passed","title":"should run correlation ID middleware on all routes","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Middleware Registration"],"fullName":" Application Bootstrap (E2E) Middleware Registration should run logging interceptor globally","status":"passed","title":"should run logging interceptor globally","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Middleware Registration"],"fullName":" Application Bootstrap (E2E) Middleware Registration should run tenant context interceptor on protected routes","status":"passed","title":"should run tenant context interceptor on protected routes","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Middleware Registration"],"fullName":" Application Bootstrap (E2E) Middleware Registration should run exception filter globally","status":"passed","title":"should run exception filter globally","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Global Pipes"],"fullName":" Application Bootstrap (E2E) Global Pipes should apply ValidationPipe globally","status":"passed","title":"should apply ValidationPipe globally","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Global Pipes"],"fullName":" Application Bootstrap (E2E) Global Pipes should whitelist properties (remove unknown fields)","status":"passed","title":"should whitelist properties (remove unknown fields)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Global Pipes"],"fullName":" Application Bootstrap (E2E) Global Pipes should forbid non-whitelisted properties","status":"passed","title":"should forbid non-whitelisted properties","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Global Pipes"],"fullName":" Application Bootstrap (E2E) Global Pipes should transform payloads (class-transformer)","status":"passed","title":"should transform payloads (class-transformer)","duration":1,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Correlation ID Flow"],"fullName":" Application Bootstrap (E2E) Correlation ID Flow should accept correlation ID from request header","status":"passed","title":"should accept correlation ID from request header","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Correlation ID Flow"],"fullName":" Application Bootstrap (E2E) Correlation ID Flow should generate correlation ID when not provided","status":"passed","title":"should generate correlation ID when not provided","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Correlation ID Flow"],"fullName":" Application Bootstrap (E2E) Correlation ID Flow should propagate correlation ID to logs","status":"passed","title":"should propagate correlation ID to logs","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Correlation ID Flow"],"fullName":" Application Bootstrap (E2E) Correlation ID Flow should propagate correlation ID to error responses","status":"passed","title":"should propagate correlation ID to error responses","duration":1,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Tenant Context Flow"],"fullName":" Application Bootstrap (E2E) Tenant Context Flow should extract tenant context from JWT on authenticated routes","status":"passed","title":"should extract tenant context from JWT on authenticated routes","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Tenant Context Flow"],"fullName":" Application Bootstrap (E2E) Tenant Context Flow should skip tenant extraction on public routes","status":"passed","title":"should skip tenant extraction on public routes","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Tenant Context Flow"],"fullName":" Application Bootstrap (E2E) Tenant Context Flow should return 401 Unauthorized when JWT missing on protected route","status":"passed","title":"should return 401 Unauthorized when JWT missing on protected route","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Application Metadata"],"fullName":" Application Bootstrap (E2E) Application Metadata should expose service name","status":"passed","title":"should expose service name","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Application Metadata"],"fullName":" Application Bootstrap (E2E) Application Metadata should expose service version","status":"passed","title":"should expose service version","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Application Metadata"],"fullName":" Application Bootstrap (E2E) Application Metadata should expose environment (without sensitive details)","status":"passed","title":"should expose environment (without sensitive details)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Error Handling"],"fullName":" Application Bootstrap (E2E) Error Handling should handle 404 Not Found for unknown routes","status":"passed","title":"should handle 404 Not Found for unknown routes","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Error Handling"],"fullName":" Application Bootstrap (E2E) Error Handling should handle method not allowed","status":"passed","title":"should handle method not allowed","duration":0,"failureMessages":[]},{"ancestorTitles":["","Application Bootstrap (E2E)","Error Handling"],"fullName":" Application Bootstrap (E2E) Error Handling should include correlation ID in error responses","status":"passed","title":"should include correlation ID in error responses","duration":0,"failureMessages":[]}],"startTime":1764027412869,"endTime":1764027412929,"status":"passed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/bootstrap.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","1. Cabinet Selection Flow - User with 1 Cabinet (Auto-Select)"],"fullName":" Cabinet Selection Authentication Flow (E2E) 1. Cabinet Selection Flow - User with 1 Cabinet (Auto-Select) should auto-select single cabinet and return JWT with subscription context","status":"failed","title":"should auto-select single cabinet and return JWT with subscription context","duration":20,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","1. Cabinet Selection Flow - User with 1 Cabinet (Auto-Select)"],"fullName":" Cabinet Selection Authentication Flow (E2E) 1. Cabinet Selection Flow - User with 1 Cabinet (Auto-Select) should mark first cabinet as primary automatically","status":"failed","title":"should mark first cabinet as primary automatically","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","2. Cabinet Selection Flow - User with Multiple Cabinets"],"fullName":" Cabinet Selection Authentication Flow (E2E) 2. Cabinet Selection Flow - User with Multiple Cabinets should return list of cabinets for user to select","status":"failed","title":"should return list of cabinets for user to select","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","2. Cabinet Selection Flow - User with Multiple Cabinets"],"fullName":" Cabinet Selection Authentication Flow (E2E) 2. Cabinet Selection Flow - User with Multiple Cabinets should allow user to select any cabinet they have access to","status":"failed","title":"should allow user to select any cabinet they have access to","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","2. Cabinet Selection Flow - User with Multiple Cabinets"],"fullName":" Cabinet Selection Authentication Flow (E2E) 2. Cabinet Selection Flow - User with Multiple Cabinets should return cabinet details with subscription for each cabinet","status":"failed","title":"should return cabinet details with subscription for each cabinet","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","3. Cabinet Selection Flow - User with 0 Cabinets"],"fullName":" Cabinet Selection Authentication Flow (E2E) 3. Cabinet Selection Flow - User with 0 Cabinets should return empty list when user has no cabinet assignments","status":"failed","title":"should return empty list when user has no cabinet assignments","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","3. Cabinet Selection Flow - User with 0 Cabinets"],"fullName":" Cabinet Selection Authentication Flow (E2E) 3. Cabinet Selection Flow - User with 0 Cabinets should handle auto-assign to default cabinet scenario","status":"failed","title":"should handle auto-assign to default cabinet scenario","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","4. User Selects Cabinet They Have Access To"],"fullName":" Cabinet Selection Authentication Flow (E2E) 4. User Selects Cabinet They Have Access To should successfully select cabinet and return JWT with correct context","status":"failed","title":"should successfully select cabinet and return JWT with correct context","duration":1,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","4. User Selects Cabinet They Have Access To"],"fullName":" Cabinet Selection Authentication Flow (E2E) 4. User Selects Cabinet They Have Access To should update session with new cabinet context","status":"failed","title":"should update session with new cabinet context","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","5. User Tries to Select Cabinet They DON'T Have Access To"],"fullName":" Cabinet Selection Authentication Flow (E2E) 5. User Tries to Select Cabinet They DON'T Have Access To should return 403 Forbidden when user lacks access","status":"failed","title":"should return 403 Forbidden when user lacks access","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","5. User Tries to Select Cabinet They DON'T Have Access To"],"fullName":" Cabinet Selection Authentication Flow (E2E) 5. User Tries to Select Cabinet They DON'T Have Access To should return 403 when cabinet relationship is inactive","status":"failed","title":"should return 403 when cabinet relationship is inactive","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","6. User Tries to Select Cabinet from Different Organization"],"fullName":" Cabinet Selection Authentication Flow (E2E) 6. User Tries to Select Cabinet from Different Organization should return 403 when cabinet belongs to different organization","status":"failed","title":"should return 403 when cabinet belongs to different organization","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","6. User Tries to Select Cabinet from Different Organization"],"fullName":" Cabinet Selection Authentication Flow (E2E) 6. User Tries to Select Cabinet from Different Organization should enforce tenant isolation in cabinet queries","status":"failed","title":"should enforce tenant isolation in cabinet queries","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","7. User Switches Cabinet (Session Invalidation)"],"fullName":" Cabinet Selection Authentication Flow (E2E) 7. User Switches Cabinet (Session Invalidation) should invalidate old JWT and create new session with different cabinet","status":"failed","title":"should invalidate old JWT and create new session with different cabinet","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","7. User Switches Cabinet (Session Invalidation)"],"fullName":" Cabinet Selection Authentication Flow (E2E) 7. User Switches Cabinet (Session Invalidation) should set new cabinet as primary if requested","status":"failed","title":"should set new cabinet as primary if requested","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","8. JWT Contains Correct Subscription Data"],"fullName":" Cabinet Selection Authentication Flow (E2E) 8. JWT Contains Correct Subscription Data should include subscription status in JWT","status":"failed","title":"should include subscription status in JWT","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","8. JWT Contains Correct Subscription Data"],"fullName":" Cabinet Selection Authentication Flow (E2E) 8. JWT Contains Correct Subscription Data should include all active modules in JWT","status":"failed","title":"should include all active modules in JWT","duration":1,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","8. JWT Contains Correct Subscription Data"],"fullName":" Cabinet Selection Authentication Flow (E2E) 8. JWT Contains Correct Subscription Data should include trial information if subscription is trial","status":"failed","title":"should include trial information if subscription is trial","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","9. Edge Cases"],"fullName":" Cabinet Selection Authentication Flow (E2E) 9. Edge Cases should reject invalid cabinet UUID format","status":"failed","title":"should reject invalid cabinet UUID format","duration":1,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","9. Edge Cases"],"fullName":" Cabinet Selection Authentication Flow (E2E) 9. Edge Cases should handle cabinet deleted after JWT issued","status":"failed","title":"should handle cabinet deleted after JWT issued","duration":1,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","9. Edge Cases"],"fullName":" Cabinet Selection Authentication Flow (E2E) 9. Edge Cases should handle subscription cancelled after cabinet selection","status":"failed","title":"should handle subscription cancelled after cabinet selection","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","9. Edge Cases"],"fullName":" Cabinet Selection Authentication Flow (E2E) 9. Edge Cases should handle expired JWT with old cabinetId","status":"failed","title":"should handle expired JWT with old cabinetId","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","9. Edge Cases"],"fullName":" Cabinet Selection Authentication Flow (E2E) 9. Edge Cases should handle subscription service unavailable during cabinet selection","status":"failed","title":"should handle subscription service unavailable during cabinet selection","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","9. Edge Cases"],"fullName":" Cabinet Selection Authentication Flow (E2E) 9. Edge Cases should handle missing X-Organization-ID header","status":"failed","title":"should handle missing X-Organization-ID header","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","10. Subscription Status Validation"],"fullName":" Cabinet Selection Authentication Flow (E2E) 10. Subscription Status Validation should allow login with ACTIVE subscription","status":"failed","title":"should allow login with ACTIVE subscription","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","10. Subscription Status Validation"],"fullName":" Cabinet Selection Authentication Flow (E2E) 10. Subscription Status Validation should allow login with TRIAL subscription","status":"failed","title":"should allow login with TRIAL subscription","duration":3,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","10. Subscription Status Validation"],"fullName":" Cabinet Selection Authentication Flow (E2E) 10. Subscription Status Validation should handle EXPIRED subscription","status":"failed","title":"should handle EXPIRED subscription","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","10. Subscription Status Validation"],"fullName":" Cabinet Selection Authentication Flow (E2E) 10. Subscription Status Validation should handle SUSPENDED subscription","status":"failed","title":"should handle SUSPENDED subscription","duration":2,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}},{"ancestorTitles":["","Cabinet Selection Authentication Flow (E2E)","10. Subscription Status Validation"],"fullName":" Cabinet Selection Authentication Flow (E2E) 10. Subscription Status Validation should handle CANCELLED subscription","status":"failed","title":"should handle CANCELLED subscription","duration":1,"failureMessages":["Cannot read properties of undefined (reading 'get')"],"location":{"line":102,"column":26}}],"startTime":1764027409008,"endTime":1764027409098,"status":"failed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/cabinet-selection.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/liveness"],"fullName":" Health Check Endpoints (E2E) GET /health/liveness should return 200 OK","status":"passed","title":"should return 200 OK","duration":1,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/liveness"],"fullName":" Health Check Endpoints (E2E) GET /health/liveness should include status: \"ok\" in response","status":"passed","title":"should include status: \"ok\" in response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/liveness"],"fullName":" Health Check Endpoints (E2E) GET /health/liveness should include service name in response","status":"passed","title":"should include service name in response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/liveness"],"fullName":" Health Check Endpoints (E2E) GET /health/liveness should include version in response","status":"passed","title":"should include version in response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/liveness"],"fullName":" Health Check Endpoints (E2E) GET /health/liveness should be accessible without authentication","status":"passed","title":"should be accessible without authentication","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/liveness"],"fullName":" Health Check Endpoints (E2E) GET /health/liveness should respond quickly (< 100ms)","status":"passed","title":"should respond quickly (< 100ms)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when all dependencies are healthy"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when all dependencies are healthy should return 200 OK","status":"passed","title":"should return 200 OK","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when all dependencies are healthy"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when all dependencies are healthy should include database status: \"up\"","status":"passed","title":"should include database status: \"up\"","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when all dependencies are healthy"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when all dependencies are healthy should include Redis status: \"up\"","status":"passed","title":"should include Redis status: \"up\"","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when all dependencies are healthy"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when all dependencies are healthy should include event bus status: \"up\"","status":"passed","title":"should include event bus status: \"up\"","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when all dependencies are healthy"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when all dependencies are healthy should include timestamp","status":"passed","title":"should include timestamp","duration":1,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when database is down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when database is down should return 503 Service Unavailable","status":"passed","title":"should return 503 Service Unavailable","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when database is down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when database is down should indicate database: \"down\" in response","status":"passed","title":"should indicate database: \"down\" in response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when database is down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when database is down should include error details (non-sensitive)","status":"passed","title":"should include error details (non-sensitive)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when database is down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when database is down should still check other services","status":"passed","title":"should still check other services","duration":1,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when Redis is down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when Redis is down should return 503 Service Unavailable","status":"passed","title":"should return 503 Service Unavailable","duration":1,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when Redis is down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when Redis is down should indicate Redis: \"down\" in response","status":"passed","title":"should indicate Redis: \"down\" in response","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when Redis is down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when Redis is down should still check database and event bus","status":"passed","title":"should still check database and event bus","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when multiple dependencies are down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when multiple dependencies are down should return 503 Service Unavailable","status":"passed","title":"should return 503 Service Unavailable","duration":1,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when multiple dependencies are down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when multiple dependencies are down should indicate all failing dependencies","status":"passed","title":"should indicate all failing dependencies","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/readiness","when multiple dependencies are down"],"fullName":" Health Check Endpoints (E2E) GET /health/readiness when multiple dependencies are down should include separate error details for each failing dependency","status":"passed","title":"should include separate error details for each failing dependency","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/detailed"],"fullName":" Health Check Endpoints (E2E) GET /health/detailed should return comprehensive health status","status":"passed","title":"should return comprehensive health status","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/detailed"],"fullName":" Health Check Endpoints (E2E) GET /health/detailed should include all health indicators","status":"passed","title":"should include all health indicators","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/detailed"],"fullName":" Health Check Endpoints (E2E) GET /health/detailed should include response times for each dependency","status":"passed","title":"should include response times for each dependency","duration":1,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/detailed"],"fullName":" Health Check Endpoints (E2E) GET /health/detailed should include memory usage metrics","status":"passed","title":"should include memory usage metrics","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/detailed"],"fullName":" Health Check Endpoints (E2E) GET /health/detailed should include uptime metric","status":"passed","title":"should include uptime metric","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","GET /health/detailed"],"fullName":" Health Check Endpoints (E2E) GET /health/detailed should require authentication (or internal network only)","status":"passed","title":"should require authentication (or internal network only)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Health Check Response Format"],"fullName":" Health Check Endpoints (E2E) Health Check Response Format should return JSON content type","status":"passed","title":"should return JSON content type","duration":1,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Health Check Response Format"],"fullName":" Health Check Endpoints (E2E) Health Check Response Format should include consistent timestamp format (ISO 8601)","status":"passed","title":"should include consistent timestamp format (ISO 8601)","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Health Check Response Format"],"fullName":" Health Check Endpoints (E2E) Health Check Response Format should not expose sensitive information","status":"passed","title":"should not expose sensitive information","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Performance"],"fullName":" Health Check Endpoints (E2E) Performance should respond to liveness check within 100ms","status":"passed","title":"should respond to liveness check within 100ms","duration":1,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Performance"],"fullName":" Health Check Endpoints (E2E) Performance should respond to readiness check within 500ms","status":"passed","title":"should respond to readiness check within 500ms","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Performance"],"fullName":" Health Check Endpoints (E2E) Performance should handle concurrent health check requests","status":"passed","title":"should handle concurrent health check requests","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Kubernetes Integration"],"fullName":" Health Check Endpoints (E2E) Kubernetes Integration should work with Kubernetes liveness probe","status":"passed","title":"should work with Kubernetes liveness probe","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Kubernetes Integration"],"fullName":" Health Check Endpoints (E2E) Kubernetes Integration should work with Kubernetes readiness probe","status":"passed","title":"should work with Kubernetes readiness probe","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Kubernetes Integration"],"fullName":" Health Check Endpoints (E2E) Kubernetes Integration should cause pod restart when liveness fails","status":"passed","title":"should cause pod restart when liveness fails","duration":0,"failureMessages":[]},{"ancestorTitles":["","Health Check Endpoints (E2E)","Kubernetes Integration"],"fullName":" Health Check Endpoints (E2E) Kubernetes Integration should remove pod from load balancer when readiness fails","status":"passed","title":"should remove pod from load balancer when readiness fails","duration":0,"failureMessages":[]}],"startTime":1764027412948,"endTime":1764027413003,"status":"passed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/health.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","1. Endpoint with @RequiresModule + User HAS Module"],"fullName":" LicenseGuard Integration Tests (E2E) 1. Endpoint with @RequiresModule + User HAS Module should allow access when user has required imaging module","status":"passed","title":"should allow access when user has required imaging module","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","1. Endpoint with @RequiresModule + User HAS Module"],"fullName":" LicenseGuard Integration Tests (E2E) 1. Endpoint with @RequiresModule + User HAS Module should allow access when user has required scheduling module","status":"passed","title":"should allow access when user has required scheduling module","duration":0,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","1. Endpoint with @RequiresModule + User HAS Module"],"fullName":" LicenseGuard Integration Tests (E2E) 1. Endpoint with @RequiresModule + User HAS Module should allow access for all core modules in active subscription","status":"passed","title":"should allow access for all core modules in active subscription","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","1. Endpoint with @RequiresModule + User HAS Module"],"fullName":" LicenseGuard Integration Tests (E2E) 1. Endpoint with @RequiresModule + User HAS Module should allow access for premium modules when user has them","status":"passed","title":"should allow access for premium modules when user has them","duration":2,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","2. Endpoint with @RequiresModule + User DOES NOT Have Module"],"fullName":" LicenseGuard Integration Tests (E2E) 2. Endpoint with @RequiresModule + User DOES NOT Have Module should deny access when user lacks imaging module","status":"passed","title":"should deny access when user lacks imaging module","duration":2,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","2. Endpoint with @RequiresModule + User DOES NOT Have Module"],"fullName":" LicenseGuard Integration Tests (E2E) 2. Endpoint with @RequiresModule + User DOES NOT Have Module should deny access when user has empty modules array","status":"passed","title":"should deny access when user has empty modules array","duration":0,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","2. Endpoint with @RequiresModule + User DOES NOT Have Module"],"fullName":" LicenseGuard Integration Tests (E2E) 2. Endpoint with @RequiresModule + User DOES NOT Have Module should provide helpful error message with module code","status":"passed","title":"should provide helpful error message with module code","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","2. Endpoint with @RequiresModule + User DOES NOT Have Module"],"fullName":" LicenseGuard Integration Tests (E2E) 2. Endpoint with @RequiresModule + User DOES NOT Have Module should deny access for premium module when user only has core modules","status":"passed","title":"should deny access for premium module when user only has core modules","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","3. Endpoint with No @RequiresModule"],"fullName":" LicenseGuard Integration Tests (E2E) 3. Endpoint with No @RequiresModule should allow access when no module metadata is present","status":"passed","title":"should allow access when no module metadata is present","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","3. Endpoint with No @RequiresModule"],"fullName":" LicenseGuard Integration Tests (E2E) 3. Endpoint with No @RequiresModule should allow access when module metadata is null","status":"passed","title":"should allow access when module metadata is null","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","3. Endpoint with No @RequiresModule"],"fullName":" LicenseGuard Integration Tests (E2E) 3. Endpoint with No @RequiresModule should allow access even with expired subscription if no module required","status":"passed","title":"should allow access even with expired subscription if no module required","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","4. Endpoint with @RequiresModule + Core Module"],"fullName":" LicenseGuard Integration Tests (E2E) 4. Endpoint with @RequiresModule + Core Module should always allow core modules for active subscription","status":"passed","title":"should always allow core modules for active subscription","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","4. Endpoint with @RequiresModule + Core Module"],"fullName":" LicenseGuard Integration Tests (E2E) 4. Endpoint with @RequiresModule + Core Module should allow core modules during trial period","status":"passed","title":"should allow core modules during trial period","duration":0,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","5. Multiple Guards Combined (@Roles + @RequiresModule)"],"fullName":" LicenseGuard Integration Tests (E2E) 5. Multiple Guards Combined (@Roles + @RequiresModule) should validate both role and module requirements","status":"passed","title":"should validate both role and module requirements","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","5. Multiple Guards Combined (@Roles + @RequiresModule)"],"fullName":" LicenseGuard Integration Tests (E2E) 5. Multiple Guards Combined (@Roles + @RequiresModule) should deny access if user has role but lacks module","status":"passed","title":"should deny access if user has role but lacks module","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","5. Multiple Guards Combined (@Roles + @RequiresModule)"],"fullName":" LicenseGuard Integration Tests (E2E) 5. Multiple Guards Combined (@Roles + @RequiresModule) should validate permissions and module access together","status":"passed","title":"should validate permissions and module access together","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","6. Active Subscription with Full Modules"],"fullName":" LicenseGuard Integration Tests (E2E) 6. Active Subscription with Full Modules should grant full access to all subscribed modules","status":"passed","title":"should grant full access to all subscribed modules","duration":2,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","6. Active Subscription with Full Modules"],"fullName":" LicenseGuard Integration Tests (E2E) 6. Active Subscription with Full Modules should handle partial module subscription correctly","status":"passed","title":"should handle partial module subscription correctly","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","7. Trial Subscription with Full Modules"],"fullName":" LicenseGuard Integration Tests (E2E) 7. Trial Subscription with Full Modules should grant full access during trial period","status":"passed","title":"should grant full access during trial period","duration":0,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","7. Trial Subscription with Full Modules"],"fullName":" LicenseGuard Integration Tests (E2E) 7. Trial Subscription with Full Modules should treat trial same as active for module access","status":"passed","title":"should treat trial same as active for module access","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","8. Expired Subscription with No Modules"],"fullName":" LicenseGuard Integration Tests (E2E) 8. Expired Subscription with No Modules should deny access when subscription is expired","status":"passed","title":"should deny access when subscription is expired","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","8. Expired Subscription with No Modules"],"fullName":" LicenseGuard Integration Tests (E2E) 8. Expired Subscription with No Modules should deny access to all modules with expired subscription","status":"passed","title":"should deny access to all modules with expired subscription","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","9. Suspended/Cancelled Subscription"],"fullName":" LicenseGuard Integration Tests (E2E) 9. Suspended/Cancelled Subscription should deny access for suspended subscription","status":"passed","title":"should deny access for suspended subscription","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","9. Suspended/Cancelled Subscription"],"fullName":" LicenseGuard Integration Tests (E2E) 9. Suspended/Cancelled Subscription should deny access for cancelled subscription","status":"passed","title":"should deny access for cancelled subscription","duration":0,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","10. Subscription Service Unavailable (Graceful Degradation)"],"fullName":" LicenseGuard Integration Tests (E2E) 10. Subscription Service Unavailable (Graceful Degradation) should allow access when no subscription context in JWT (backward compatibility)","status":"failed","title":"should allow access when no subscription context in JWT (backward compatibility)","duration":5,"failureMessages":["Access denied: Module 'imaging' is required but no subscription information found. Please contact your administrator."],"location":{"line":131,"column":13}},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","10. Subscription Service Unavailable (Graceful Degradation)"],"fullName":" LicenseGuard Integration Tests (E2E) 10. Subscription Service Unavailable (Graceful Degradation) should throw error when user is not authenticated","status":"passed","title":"should throw error when user is not authenticated","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","10. Subscription Service Unavailable (Graceful Degradation)"],"fullName":" LicenseGuard Integration Tests (E2E) 10. Subscription Service Unavailable (Graceful Degradation) should throw error when user is undefined","status":"passed","title":"should throw error when user is undefined","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","11. Edge Cases and Error Handling"],"fullName":" LicenseGuard Integration Tests (E2E) 11. Edge Cases and Error Handling should handle concurrent requests with different users","status":"passed","title":"should handle concurrent requests with different users","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","11. Edge Cases and Error Handling"],"fullName":" LicenseGuard Integration Tests (E2E) 11. Edge Cases and Error Handling should check method metadata before class metadata","status":"passed","title":"should check method metadata before class metadata","duration":2,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","11. Edge Cases and Error Handling"],"fullName":" LicenseGuard Integration Tests (E2E) 11. Edge Cases and Error Handling should handle invalid module codes gracefully","status":"passed","title":"should handle invalid module codes gracefully","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","11. Edge Cases and Error Handling"],"fullName":" LicenseGuard Integration Tests (E2E) 11. Edge Cases and Error Handling should handle case-sensitive module codes","status":"passed","title":"should handle case-sensitive module codes","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","12. Real-World Scenarios"],"fullName":" LicenseGuard Integration Tests (E2E) 12. Real-World Scenarios should handle dentist accessing imaging feature with imaging module","status":"passed","title":"should handle dentist accessing imaging feature with imaging module","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","12. Real-World Scenarios"],"fullName":" LicenseGuard Integration Tests (E2E) 12. Real-World Scenarios should deny receptionist accessing advanced clinical features","status":"passed","title":"should deny receptionist accessing advanced clinical features","duration":0,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","12. Real-World Scenarios"],"fullName":" LicenseGuard Integration Tests (E2E) 12. Real-World Scenarios should allow admin accessing analytics with correct module","status":"passed","title":"should allow admin accessing analytics with correct module","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","12. Real-World Scenarios"],"fullName":" LicenseGuard Integration Tests (E2E) 12. Real-World Scenarios should handle multi-location feature for enterprise subscription","status":"passed","title":"should handle multi-location feature for enterprise subscription","duration":1,"failureMessages":[]},{"ancestorTitles":["","LicenseGuard Integration Tests (E2E)","12. Real-World Scenarios"],"fullName":" LicenseGuard Integration Tests (E2E) 12. Real-World Scenarios should deny multi-location for single clinic subscription","status":"passed","title":"should deny multi-location for single clinic subscription","duration":1,"failureMessages":[]}],"startTime":1764027409507,"endTime":1764027409583,"status":"failed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/license-guard.e2e.spec.ts"},{"assertionResults":[{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 1: Token Blacklist on Cabinet Switch"],"fullName":" Security Fixes E2E SECURITY FIX 1: Token Blacklist on Cabinet Switch should blacklist old token when switching cabinets","status":"pending","title":"should blacklist old token when switching cabinets","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 1: Token Blacklist on Cabinet Switch"],"fullName":" Security Fixes E2E SECURITY FIX 1: Token Blacklist on Cabinet Switch should blacklist token immediately (< 100ms)","status":"pending","title":"should blacklist token immediately (< 100ms)","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 1: Token Blacklist on Cabinet Switch"],"fullName":" Security Fixes E2E SECURITY FIX 1: Token Blacklist on Cabinet Switch should store blacklist metadata with reason","status":"pending","title":"should store blacklist metadata with reason","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 1: Token Blacklist on Cabinet Switch"],"fullName":" Security Fixes E2E SECURITY FIX 1: Token Blacklist on Cabinet Switch should automatically expire blacklist entry after token TTL","status":"pending","title":"should automatically expire blacklist entry after token TTL","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 2: SessionId Validation in JWT"],"fullName":" Security Fixes E2E SECURITY FIX 2: SessionId Validation in JWT should reject token without sessionId","status":"pending","title":"should reject token without sessionId","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 2: SessionId Validation in JWT"],"fullName":" Security Fixes E2E SECURITY FIX 2: SessionId Validation in JWT should reject token with invalid sessionId","status":"pending","title":"should reject token with invalid sessionId","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 2: SessionId Validation in JWT"],"fullName":" Security Fixes E2E SECURITY FIX 2: SessionId Validation in JWT should accept token with valid sessionId","status":"pending","title":"should accept token with valid sessionId","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 2: SessionId Validation in JWT"],"fullName":" Security Fixes E2E SECURITY FIX 2: SessionId Validation in JWT should validate session ownership","status":"pending","title":"should validate session ownership","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 3: Token Blacklist Checking in JWT Strategy"],"fullName":" Security Fixes E2E SECURITY FIX 3: Token Blacklist Checking in JWT Strategy should reject blacklisted token","status":"pending","title":"should reject blacklisted token","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 3: Token Blacklist Checking in JWT Strategy"],"fullName":" Security Fixes E2E SECURITY FIX 3: Token Blacklist Checking in JWT Strategy should check blacklist before session validation (fail-fast)","status":"pending","title":"should check blacklist before session validation (fail-fast)","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 3: Token Blacklist Checking in JWT Strategy"],"fullName":" Security Fixes E2E SECURITY FIX 3: Token Blacklist Checking in JWT Strategy should accept non-blacklisted token with valid session","status":"pending","title":"should accept non-blacklisted token with valid session","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 4: LicenseGuard Enforces Subscription"],"fullName":" Security Fixes E2E SECURITY FIX 4: LicenseGuard Enforces Subscription should block access when subscription missing (no graceful degradation)","status":"pending","title":"should block access when subscription missing (no graceful degradation)","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 4: LicenseGuard Enforces Subscription"],"fullName":" Security Fixes E2E SECURITY FIX 4: LicenseGuard Enforces Subscription should block access when required module not in subscription","status":"pending","title":"should block access when required module not in subscription","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 4: LicenseGuard Enforces Subscription"],"fullName":" Security Fixes E2E SECURITY FIX 4: LicenseGuard Enforces Subscription should allow access when user has required module","status":"pending","title":"should allow access when user has required module","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 4: LicenseGuard Enforces Subscription"],"fullName":" Security Fixes E2E SECURITY FIX 4: LicenseGuard Enforces Subscription should provide clear error message for missing subscription","status":"pending","title":"should provide clear error message for missing subscription","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 5: Token Revocation on Logout"],"fullName":" Security Fixes E2E SECURITY FIX 5: Token Revocation on Logout should blacklist token on logout","status":"pending","title":"should blacklist token on logout","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 5: Token Revocation on Logout"],"fullName":" Security Fixes E2E SECURITY FIX 5: Token Revocation on Logout should invalidate session on logout","status":"pending","title":"should invalidate session on logout","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 5: Token Revocation on Logout"],"fullName":" Security Fixes E2E SECURITY FIX 5: Token Revocation on Logout should be idempotent (logout twice succeeds)","status":"pending","title":"should be idempotent (logout twice succeeds)","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","SECURITY FIX 5: Token Revocation on Logout"],"fullName":" Security Fixes E2E SECURITY FIX 5: Token Revocation on Logout should blacklist token with correct metadata on logout","status":"pending","title":"should blacklist token with correct metadata on logout","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","Performance: Security Overhead < 5ms"],"fullName":" Security Fixes E2E Performance: Security Overhead < 5ms should add minimal overhead for blacklist check","status":"pending","title":"should add minimal overhead for blacklist check","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","Performance: Security Overhead < 5ms"],"fullName":" Security Fixes E2E Performance: Security Overhead < 5ms should handle blacklist check in < 1ms","status":"pending","title":"should handle blacklist check in < 1ms","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","Integration: Complete Security Flow"],"fullName":" Security Fixes E2E Integration: Complete Security Flow should enforce all security checks in correct order","status":"pending","title":"should enforce all security checks in correct order","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","Integration: Complete Security Flow"],"fullName":" Security Fixes E2E Integration: Complete Security Flow should fail at first security check (blacklist)","status":"pending","title":"should fail at first security check (blacklist)","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","Integration: Complete Security Flow"],"fullName":" Security Fixes E2E Integration: Complete Security Flow should enforce complete security chain on cabinet switch","status":"pending","title":"should enforce complete security chain on cabinet switch","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","Error Scenarios"],"fullName":" Security Fixes E2E Error Scenarios should handle Redis failure gracefully (fail closed)","status":"pending","title":"should handle Redis failure gracefully (fail closed)","failureMessages":[]},{"ancestorTitles":["","Security Fixes E2E","Error Scenarios"],"fullName":" Security Fixes E2E Error Scenarios should provide clear error messages for security failures","status":"pending","title":"should provide clear error messages for security failures","failureMessages":[]}],"startTime":1764027406925,"endTime":1764027406925,"status":"failed","message":"","name":"/home/adrian/Desktop/SBD-Projects/personal/preclinic/dental/apps/backend-auth/test/integration/security-fixes.e2e.spec.ts"}]}