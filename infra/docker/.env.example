# ================================
# Dental Application - Docker Environment Configuration
# ================================
# Copy this file to .env and update values as needed
# NEVER commit .env file to version control

# ================================
# PostgreSQL Configuration
# ================================
POSTGRES_PORT=5433
POSTGRES_USER=dental_user
POSTGRES_PASSWORD=dental_password_change_me
POSTGRES_DB=dental_db

# Additional PostgreSQL databases to create (comma-separated)
POSTGRES_ADDITIONAL_DBS=dental_test,dental_analytics

# ================================
# MongoDB Configuration
# ================================
MONGO_PORT=27017
MONGO_ROOT_USER=admin
MONGO_ROOT_PASSWORD=mongo_admin_password_change_me
MONGO_DB=dental_documents

# MongoDB application user (created via init scripts)
MONGO_APP_USER=dental_app
MONGO_APP_PASSWORD=mongo_app_password_change_me

# ================================
# Redis Configuration
# ================================
REDIS_PORT=6381
REDIS_PASSWORD=redis_password_change_me

# Redis configuration options
REDIS_MAXMEMORY=256mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ================================
# RabbitMQ Configuration
# ================================
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_USER=dental_user
RABBITMQ_PASSWORD=rabbitmq_password_change_me
RABBITMQ_VHOST=dental

# RabbitMQ Management UI
# Access at: http://localhost:15672
# Username: dental_user
# Password: rabbitmq_password_change_me

# ================================
# OpenSearch Configuration
# ================================
OPENSEARCH_PORT=9200
OPENSEARCH_PERF_PORT=9600
OPENSEARCH_DASHBOARDS_PORT=5601

# OpenSearch admin credentials
# Password must contain: uppercase, lowercase, number, special char, min 8 chars
OPENSEARCH_ADMIN_PASSWORD=Admin@123SecurePassword

# Security settings
OPENSEARCH_DISABLE_SECURITY=false

# OpenSearch Dashboards
# Access at: http://localhost:5601
# Username: admin
# Password: Admin@123SecurePassword

# ================================
# Application Configuration
# ================================
APP_ENV=development
APP_DEBUG=true
APP_LOG_LEVEL=debug

# ================================
# Service Discovery
# ================================
# Connection strings for application use

# PostgreSQL connection string
DATABASE_URL=postgresql://dental_user:dental_password_change_me@localhost:5433/dental_db

# MongoDB connection string
MONGODB_URI=mongodb://dental_app:mongo_app_password_change_me@localhost:27017/dental_documents?authSource=dental_documents

# Redis connection string
REDIS_URL=redis://:redis_password_change_me@localhost:6381/0

# RabbitMQ connection string
RABBITMQ_URL=amqp://dental_user:rabbitmq_password_change_me@localhost:5672/dental

# OpenSearch connection string
OPENSEARCH_URL=https://admin:Admin@123SecurePassword@localhost:9200

# ================================
# Resource Limits
# ================================
# Docker resource constraints (adjust based on host capacity)

# PostgreSQL
POSTGRES_CPU_LIMIT=2
POSTGRES_MEMORY_LIMIT=2G
POSTGRES_MEMORY_RESERVATION=512M

# MongoDB
MONGO_CPU_LIMIT=2
MONGO_MEMORY_LIMIT=2G
MONGO_MEMORY_RESERVATION=512M

# Redis
REDIS_CPU_LIMIT=1
REDIS_MEMORY_LIMIT=512M
REDIS_MEMORY_RESERVATION=128M

# RabbitMQ
RABBITMQ_CPU_LIMIT=1.5
RABBITMQ_MEMORY_LIMIT=1G
RABBITMQ_MEMORY_RESERVATION=256M

# OpenSearch
OPENSEARCH_CPU_LIMIT=2
OPENSEARCH_MEMORY_LIMIT=2G
OPENSEARCH_MEMORY_RESERVATION=1G

# ================================
# Backup Configuration
# ================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# ================================
# Monitoring & Observability
# ================================
# Enable metrics collection
METRICS_ENABLED=true

# Prometheus metrics ports
POSTGRES_EXPORTER_PORT=9187
MONGODB_EXPORTER_PORT=9216
REDIS_EXPORTER_PORT=9121

# ================================
# Development Settings
# ================================
# Enable query logging
POSTGRES_LOG_STATEMENT=all
POSTGRES_LOG_DURATION=on

# Enable slow query logging
MONGO_SLOW_QUERY_THRESHOLD_MS=100

# Enable debug logging
REDIS_LOGLEVEL=debug
RABBITMQ_LOGLEVEL=debug
